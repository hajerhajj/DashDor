pipeline {
    agent any
    
    stages {
        stage('Checkout') {
            steps {
                // Étape pour récupérer le code depuis le référentiel git
                checkout scm
            }
        }
        stage('Install dependencies') {
            steps {
                // Étape pour installer les dépendances Python
                sh 'pip install -r requirements.txt'
            }
        }
        stage('Run tests') {
            steps {
                // Étape pour exécuter les tests Django
                sh 'python manage.py test'
            }
        }
        stage('Collect static files') {
            steps {
                // Étape pour collecter les fichiers statiques
                sh 'python manage.py collectstatic --noinput'
            }
        }
        stage('Database migration') {
            steps {
                // Étape pour appliquer les migrations de la base de données
                sh 'python manage.py migrate'
            }
        }
        stage('Deploy') {
            steps {
                // Étape pour déployer l'application Django
                // Vous pouvez ajouter ici des commandes pour déployer l'application, comme copier les fichiers sur un serveur, redémarrer des services, etc.
            }
        }
    }
}
